


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > PlayerGUI</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">it.polimi.ingsw.view.GUI</a>
</div>

<h1>Coverage Summary for Class: PlayerGUI (it.polimi.ingsw.view.GUI)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">PlayerGUI</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/49)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1112)
  </span>
</td>
</tr>
  <tr>
    <td class="name">PlayerGUI$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/11)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">PlayerGUI$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">PlayerGUI$3</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/54)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1127)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package it.polimi.ingsw.view.GUI;
&nbsp;
&nbsp;import it.polimi.ingsw.view.*;
&nbsp;
&nbsp;
&nbsp;import it.polimi.ingsw.controller.*;
&nbsp;import it.polimi.ingsw.model.*;
&nbsp;
&nbsp;import javax.sound.sampled.*;
&nbsp;import javax.swing.*;
&nbsp;import java.awt.*;
&nbsp;import java.awt.Color;
&nbsp;import java.awt.event.MouseAdapter;
&nbsp;import java.awt.event.MouseEvent;
&nbsp;import java.io.*;
&nbsp;import java.net.Socket;
&nbsp;import java.rmi.NotBoundException;
&nbsp;import java.rmi.RemoteException;
&nbsp;import java.rmi.registry.LocateRegistry;
&nbsp;import java.text.SimpleDateFormat;
&nbsp;import java.util.ArrayList;
&nbsp;
&nbsp;import java.util.Arrays;
&nbsp;import java.util.Date;
&nbsp;
&nbsp;import static java.awt.Color.*;
&nbsp;import static java.awt.GridBagConstraints.*;
&nbsp;import static javax.swing.JOptionPane.*;
&nbsp;
&nbsp;/**
&nbsp; * class which represent the player on the client side, mutable,
&nbsp; * implements Serializable because it will be sent in the socket network
&nbsp; * @author Ettori Faccincani
&nbsp; */
<b class="nc">&nbsp;public class PlayerGUI extends Player implements Serializable, PlayerI {</b>
<b class="nc">&nbsp;    private final transient int DIM = 9;</b>
<b class="nc">&nbsp;    private final transient int ROWS = 6;</b>
<b class="nc">&nbsp;    private final transient int COLS = 5;</b>
<b class="nc">&nbsp;    private final transient int cardBorderSize = 2;</b>
<b class="nc">&nbsp;    private final transient java.awt.Color borderColor = BLACK;</b>
<b class="nc">&nbsp;    private final transient int libFullX = 6;</b>
<b class="nc">&nbsp;    private final transient int libFullY = 7;</b>
<b class="nc">&nbsp;    private final transient Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();</b>
<b class="nc">&nbsp;    private final transient GridBagConstraints gbc = new GridBagConstraints();</b>
<b class="nc">&nbsp;    private final transient GridBagConstraints gbc2 = new GridBagConstraints();</b>
&nbsp;    private transient JFrame mainFrame;
&nbsp;    private transient JPanel infoBox, internalPanelSide, internalPanelHigh, internalPanelLow, player1Panel, player2Panel, player3Panel, gameBoardPanel, myLibraryPanel, chatPanel, CO1Panel, CO2Panel, POPanel, chairmanPanel, mainPanel, chooseColPanel;
&nbsp;    private transient JLabel POLabel, CO1Label, CO2Label, pointsCO1Label, pointsCO2Label, chairmanLabel, library1Label, library2Label, library3Label, boardLabel, libraryLabel, generalLabel;
&nbsp;    private transient JTextField chairmanInfo, activeTurnInfo, curPointsInfo, titleInfo, insertMessage, insertPlayer, CO1Title, CO2Title, POTitle, chairmanTitle, eventText, textInput;
&nbsp;    private transient JTextArea library1Text, library2Text, library3Text, boardText, myLibraryText, chatTitle, tempChatHistory;
&nbsp;    private transient JRadioButton r1, r2, r3, r4, r5;
&nbsp;    private transient ButtonGroup btnGroup;
&nbsp;    private transient JScrollPane chatHistory;
&nbsp;    private transient JButton pickCardsBtn, sendMessageBtn, sendBtn;
&nbsp;
<b class="nc">&nbsp;    private final transient JLabel[][] boardCards = new JLabel[DIM][DIM];</b>
<b class="nc">&nbsp;    private final transient JLabel[][] myLibraryCards = new JLabel[ROWS][COLS];</b>
<b class="nc">&nbsp;    private final transient ArrayList&lt;JLabel[][]&gt; otherLibrariesCards = new ArrayList&lt;&gt;(Arrays.asList(new JLabel[ROWS][COLS], new JLabel[ROWS][COLS], new JLabel[ROWS][COLS]));</b>
&nbsp;
<b class="nc">&nbsp;    private transient ArrayList&lt;Integer&gt; cardsPicked = new ArrayList&lt;&gt;();</b>
&nbsp;    private transient GameI server;
<b class="nc">&nbsp;    private final transient ClassLoader classLoader = getClass().getClassLoader();</b>
&nbsp;
&nbsp;    /**
&nbsp;     * constructor that copies a generic Player object inside a new PlayerTUI object
&nbsp;     * @param p the Player object to copy, received by the server
&nbsp;     */
&nbsp;    public PlayerGUI(Player p) throws RemoteException {
<b class="nc">&nbsp;        super();</b>
<b class="nc">&nbsp;        name = p.getName();</b>
<b class="nc">&nbsp;        isChairMan = p.getIsChairMan();</b>
<b class="nc">&nbsp;        library = new Library(p.library);</b>
<b class="nc">&nbsp;        objective = p.getPrivateObjective();</b>
<b class="nc">&nbsp;        pointsUntilNow = p.pointsUntilNow;</b>
<b class="nc">&nbsp;        board = new Board(p.board);</b>
<b class="nc">&nbsp;        librariesOfOtherPlayers = new ArrayList&lt;&gt;(p.librariesOfOtherPlayers);</b>
<b class="nc">&nbsp;        CO_1_Done = p.getCO_1_Done();</b>
<b class="nc">&nbsp;        CO_2_Done = p.getCO_2_Done();</b>
<b class="nc">&nbsp;        fullChat = p.getFullChat();</b>
<b class="nc">&nbsp;        chairmanName = p.chairmanName;</b>
<b class="nc">&nbsp;        activeName = p.activeName;</b>
<b class="nc">&nbsp;        numPlayers = p.numPlayers;</b>
<b class="nc">&nbsp;        endGame = p.getEndGame();</b>
<b class="nc">&nbsp;        pointsMap = p.pointsMap;</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * standard constructor, starts the main game process on the client side
&nbsp;     * @param mode type of the network chosen by the user
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    public PlayerGUI(NetMode mode, String opt) throws RemoteException {
<b class="nc">&nbsp;        super();</b>
<b class="nc">&nbsp;        screenSize.height = 950;</b>
<b class="nc">&nbsp;        screenSize.width = 1600;</b>
<b class="nc">&nbsp;        System.setProperty(&quot;java.rmi.server.hostname&quot;, IP.activeIP);</b>
<b class="nc">&nbsp;        uiMode = UIMode.GUI;</b>
<b class="nc">&nbsp;        netMode = mode;</b>
<b class="nc">&nbsp;        System.out.println(&quot;\nSoon you will need to enter your nickname for the game&quot;);</b>
&nbsp;        try {
<b class="nc">&nbsp;            mySocket = new Socket(IP.activeIP, Initializer.PORT);</b>
<b class="nc">&nbsp;            outStream = new ObjectOutputStream(mySocket.getOutputStream());</b>
<b class="nc">&nbsp;            inStream = new ObjectInputStream(mySocket.getInputStream());</b>
<b class="nc">&nbsp;            outStream.flush();</b>
<b class="nc">&nbsp;            if(!opt.equals(&quot;yes&quot;)){</b>
<b class="nc">&nbsp;                outStream.writeObject(false);</b>
&nbsp;            }
<b class="nc">&nbsp;        }catch (Exception e){alert(&quot;\nServer is inactive, try later&quot;); connectionLost(e);}</b>
<b class="nc">&nbsp;        System.out.println(&quot;\nClient connected&quot;);</b>
&nbsp;        try {
<b class="nc">&nbsp;            AudioInputStream audioInput = AudioSystem.getAudioInputStream(new BufferedInputStream(getClass().getResourceAsStream(&quot;/song.wav&quot;)));</b>
&nbsp;
<b class="nc">&nbsp;            Clip clip = AudioSystem.getClip();</b>
<b class="nc">&nbsp;            clip.open(audioInput);</b>
<b class="nc">&nbsp;            clip.loop(Clip.LOOP_CONTINUOUSLY);</b>
&nbsp;
<b class="nc">&nbsp;            FloatControl gainControl = (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);</b>
<b class="nc">&nbsp;            gainControl.setValue(-10.0f); //lower the volume of 10 decibel</b>
&nbsp;
<b class="nc">&nbsp;            clip.start();</b>
<b class="nc">&nbsp;        }catch(Exception e){</b>
<b class="nc">&nbsp;            e.printStackTrace();</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        new Thread(this::showChooseNameWindow).start();</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * Clone the player on the client in the player on the server
&nbsp;     * @author Ettori
&nbsp;     * @param p the Player that will be cloned in the current Object
&nbsp;     */
&nbsp;    public void clone(PlayerGUI p){
<b class="nc">&nbsp;        name = p.name;</b>
<b class="nc">&nbsp;        isChairMan = p.isChairMan;</b>
<b class="nc">&nbsp;        library = new Library(p.library);</b>
<b class="nc">&nbsp;        objective = p.objective;</b>
<b class="nc">&nbsp;        pointsUntilNow = p.pointsUntilNow;</b>
<b class="nc">&nbsp;        board = new Board(p.board);</b>
<b class="nc">&nbsp;        librariesOfOtherPlayers = new ArrayList&lt;&gt;(p.librariesOfOtherPlayers);</b>
<b class="nc">&nbsp;        CO_1_Done = p.CO_1_Done;</b>
<b class="nc">&nbsp;        CO_2_Done = p.CO_2_Done;</b>
<b class="nc">&nbsp;        fullChat = p.fullChat;</b>
<b class="nc">&nbsp;        chairmanName = p.chairmanName;</b>
<b class="nc">&nbsp;        activeName = p.activeName;</b>
<b class="nc">&nbsp;        numPlayers = p.numPlayers;</b>
<b class="nc">&nbsp;        endGame = p.endGame;</b>
<b class="nc">&nbsp;        pointsMap = p.pointsMap;</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that update the information about the game
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    private void updateInfo(){
&nbsp;        //Game.waitForSeconds(Game.fastTimer);
<b class="nc">&nbsp;        SwingUtilities.invokeLater(() -&gt; {</b>
<b class="nc">&nbsp;            pointsCO1Label.setIcon(board.pointsCO_1.size() == 0 ? new ImageIcon (new ImageIcon(classLoader.getResource(&quot;scoring tokens/scoring_back_EMPTY.jpg&quot;)).getImage().getScaledInstance(Dimensions.pointsDim, Dimensions.pointsDim, Image.SCALE_SMOOTH)) : new ImageIcon (new ImageIcon(classLoader.getResource(Dimensions.pathPointsCO + &quot;_&quot; + board.pointsCO_1.peekLast() + &quot;.jpg&quot;)).getImage().getScaledInstance(Dimensions.pointsDim, Dimensions.pointsDim, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;            pointsCO2Label.setIcon(board.pointsCO_2.size() == 0 ? new ImageIcon (new ImageIcon(classLoader.getResource(&quot;scoring tokens/scoring_back_EMPTY.jpg&quot;)).getImage().getScaledInstance(Dimensions.pointsDim, Dimensions.pointsDim, Image.SCALE_SMOOTH)) : new ImageIcon (new ImageIcon(classLoader.getResource(Dimensions.pathPointsCO + &quot;_&quot; + board.pointsCO_2.peekLast() + &quot;.jpg&quot;)).getImage().getScaledInstance(Dimensions.pointsDim, Dimensions.pointsDim, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;            activeTurnInfo.setText(&quot; The active player is &quot; + activeName + &quot; &quot;);</b>
<b class="nc">&nbsp;            curPointsInfo.setText(&quot; &quot; + pointsUntilNow + &quot; points achieved until now &quot;);</b>
<b class="nc">&nbsp;            tempChatHistory.setText(fullChat);</b>
<b class="nc">&nbsp;            mainFrame.revalidate();</b>
<b class="nc">&nbsp;            mainFrame.repaint();</b>
&nbsp;        });
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that update the board of the game
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    private void updateBoard(){
<b class="nc">&nbsp;        SwingUtilities.invokeLater(() -&gt;{</b>
&nbsp;            String path;
<b class="nc">&nbsp;            for(int i = 0; i &lt; DIM; i++){</b>
<b class="nc">&nbsp;                for(int j = 0; j &lt; DIM; j++){</b>
<b class="nc">&nbsp;                    if(i == libFullX &amp;&amp; j == libFullY)</b>
<b class="nc">&nbsp;                        continue;</b>
<b class="nc">&nbsp;                    path = board.getGameBoard()[i][j].imagePath.trim();</b>
&nbsp;                    try {
<b class="nc">&nbsp;                        boardCards[i][j].setIcon(new ImageIcon(new ImageIcon(classLoader.getResource(path)).getImage().getScaledInstance(Dimensions.cardDimBoard, Dimensions.cardDimBoard, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;                    }catch(Exception ignored){}</b>
<b class="nc">&nbsp;                    boardCards[i][j].setVisible(board.getGameBoard()[i][j].color != it.polimi.ingsw.model.Color.EMPTY);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            boardCards[libFullX][libFullY].setVisible(!endGame);</b>
<b class="nc">&nbsp;            mainFrame.revalidate();</b>
<b class="nc">&nbsp;            mainFrame.repaint();</b>
&nbsp;        });
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that update the library of the active player
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    private void updateMyLibrary(){
<b class="nc">&nbsp;        SwingUtilities.invokeLater(() -&gt;{</b>
<b class="nc">&nbsp;            for(int i = 0; i &lt; ROWS; i++) {</b>
<b class="nc">&nbsp;                for (int j = 0; j &lt; COLS; j++) {</b>
&nbsp;                    try {
<b class="nc">&nbsp;                        myLibraryCards[i][j].setIcon(new ImageIcon(new ImageIcon(classLoader.getResource(library.gameLibrary[i][j].imagePath)).getImage().getScaledInstance(Dimensions.cardDimBoard, Dimensions.cardDimBoard, Image.SCALE_SMOOTH)));</b>
&nbsp;                    }
<b class="nc">&nbsp;                    catch (Exception ignored){}</b>
<b class="nc">&nbsp;                    myLibraryCards[i][j].setVisible(library.gameLibrary[i][j].color != it.polimi.ingsw.model.Color.EMPTY);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            mainFrame.revalidate();</b>
<b class="nc">&nbsp;            mainFrame.repaint();</b>
&nbsp;            //myLibraryCards[2][2].setIcon(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;item tiles/Cornici1.3.png&quot;)).getImage().getScaledInstance(Dimensions.cardDimBoard, Dimensions.cardDimBoard, Image.SCALE_SMOOTH)));
&nbsp;        });
&nbsp;        //myLibraryCards[2][2].setIcon(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;item tiles/Cornici1.3.png&quot;)).getImage().getScaledInstance(Dimensions.cardDimBoard, Dimensions.cardDimBoard, Image.SCALE_SMOOTH)));
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that update the event text of the game, notifying the most recent event
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    private void updateEventText(String s){
<b class="nc">&nbsp;        SwingUtilities.invokeLater(() -&gt;{</b>
&nbsp;            try {
<b class="nc">&nbsp;                eventText.setText(s);</b>
<b class="nc">&nbsp;            }catch (Exception ignored){}</b>
<b class="nc">&nbsp;            mainFrame.revalidate();</b>
<b class="nc">&nbsp;            mainFrame.repaint();</b>
&nbsp;        });
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that update the libraries of all the player except the one which is active
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    private void updateOtherLibraries(){
<b class="nc">&nbsp;        SwingUtilities.invokeLater(() -&gt;{</b>
<b class="nc">&nbsp;            library1Text.setText(&quot; Library of &quot; + librariesOfOtherPlayers.get(0).name + &quot; (&quot; + pointsMap.get(librariesOfOtherPlayers.get(0).name) + &quot; points) &quot;);</b>
<b class="nc">&nbsp;            for(int i = 0; i &lt; ROWS; i++) {</b>
<b class="nc">&nbsp;                for (int j = 0; j &lt; COLS; j++) {</b>
&nbsp;                    try {
<b class="nc">&nbsp;                        otherLibrariesCards.get(0)[i][j].setIcon(new ImageIcon(new ImageIcon(classLoader.getResource(librariesOfOtherPlayers.get(0).gameLibrary[i][j].imagePath)).getImage().getScaledInstance(Dimensions.cardDimBoard, Dimensions.cardDimBoard, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;                    }catch(Exception ignored){}</b>
<b class="nc">&nbsp;                    otherLibrariesCards.get(0)[i][j].setVisible(librariesOfOtherPlayers.get(0).gameLibrary[i][j].color != it.polimi.ingsw.model.Color.EMPTY);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if(numPlayers &gt;= 3){</b>
<b class="nc">&nbsp;                library2Text.setText(&quot; Library of &quot; + librariesOfOtherPlayers.get(1).name + &quot; (&quot; + pointsMap.get(librariesOfOtherPlayers.get(1).name) + &quot; points) &quot;);</b>
<b class="nc">&nbsp;                for(int i = 0; i &lt; ROWS; i++) {</b>
<b class="nc">&nbsp;                    for (int j = 0; j &lt; COLS; j++) {</b>
&nbsp;                        try {
<b class="nc">&nbsp;                            otherLibrariesCards.get(1)[i][j].setIcon(new ImageIcon(new ImageIcon(classLoader.getResource(librariesOfOtherPlayers.get(1).gameLibrary[i][j].imagePath)).getImage().getScaledInstance(Dimensions.cardDimBoard, Dimensions.cardDimBoard, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;                        }catch(Exception ignored){}</b>
<b class="nc">&nbsp;                        otherLibrariesCards.get(1)[i][j].setVisible(librariesOfOtherPlayers.get(1).gameLibrary[i][j].color != it.polimi.ingsw.model.Color.EMPTY);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if(numPlayers &gt;= 4){</b>
<b class="nc">&nbsp;                library3Text.setText(&quot; Library of &quot; + librariesOfOtherPlayers.get(2).name + &quot; (&quot; + pointsMap.get(librariesOfOtherPlayers.get(2).name) + &quot; points) &quot;);</b>
<b class="nc">&nbsp;                for(int i = 0; i &lt; ROWS; i++) {</b>
<b class="nc">&nbsp;                    for (int j = 0; j &lt; COLS; j++) {</b>
&nbsp;                        try {
<b class="nc">&nbsp;                            otherLibrariesCards.get(2)[i][j].setIcon(new ImageIcon(new ImageIcon(classLoader.getResource(librariesOfOtherPlayers.get(2).gameLibrary[i][j].imagePath)).getImage().getScaledInstance(Dimensions.cardDimBoard, Dimensions.cardDimBoard, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;                        }catch (Exception ignored){}</b>
<b class="nc">&nbsp;                        otherLibrariesCards.get(2)[i][j].setVisible(librariesOfOtherPlayers.get(2).gameLibrary[i][j].color != it.polimi.ingsw.model.Color.EMPTY);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            mainFrame.revalidate();</b>
<b class="nc">&nbsp;            mainFrame.repaint();</b>
&nbsp;        });
&nbsp;    }
&nbsp;    /**
&nbsp;     * Function that update the GUI with the new information
&nbsp;     * @author Ettori Giammusso
&nbsp;     */
&nbsp;    private void updateGUI(){
<b class="nc">&nbsp;        updateInfo();</b>
<b class="nc">&nbsp;        updateBoard();</b>
<b class="nc">&nbsp;        updateMyLibrary();</b>
<b class="nc">&nbsp;        updateOtherLibraries();</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * check if the card was already picked before
&nbsp;     * @author Ettori
&nbsp;     * @param x the x coord
&nbsp;     * @param y the y coord
&nbsp;     * @return -1 if it was not picked before, the current index if it was picked before
&nbsp;     */
&nbsp;    private int getCardIndex(int x, int y){
<b class="nc">&nbsp;        for(int i = 0; i &lt; cardsPicked.size(); i += 2){</b>
<b class="nc">&nbsp;            if(cardsPicked.get(i) == x &amp;&amp; cardsPicked.get(i + 1) == y)</b>
<b class="nc">&nbsp;                return i;</b>
&nbsp;        }
<b class="nc">&nbsp;        return -1;</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that reads the cards chosen and the column chosen, then it tries to pick the cards (if possible)
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    private void tryToPickCards(){
<b class="nc">&nbsp;        ArrayList&lt;Integer&gt; cards = new ArrayList&lt;&gt;(cardsPicked);</b>
<b class="nc">&nbsp;        cardsPicked = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        int col = -1;</b>
&nbsp;
<b class="nc">&nbsp;        if(r1.isSelected())</b>
<b class="nc">&nbsp;            col = 1;</b>
<b class="nc">&nbsp;        if(r2.isSelected())</b>
<b class="nc">&nbsp;            col = 2;</b>
<b class="nc">&nbsp;        if(r3.isSelected())</b>
<b class="nc">&nbsp;            col = 3;</b>
<b class="nc">&nbsp;        if(r4.isSelected())</b>
<b class="nc">&nbsp;            col = 4;</b>
<b class="nc">&nbsp;        if(r5.isSelected())</b>
<b class="nc">&nbsp;            col = 5;</b>
<b class="nc">&nbsp;        col--;</b>
<b class="nc">&nbsp;        if(cards.size() == 0 || !board.areCardsPickable(cards) || !library.checkCol(col, cards.size() / 2))</b>
<b class="nc">&nbsp;            alert(&quot;Invalid Selection&quot;);</b>
&nbsp;        else{
<b class="nc">&nbsp;            activeName = &quot;...&quot;;</b>
<b class="nc">&nbsp;            pickCards(cards, col);</b>
<b class="nc">&nbsp;            updateGUI();</b>
<b class="nc">&nbsp;            boolean change_1 = checkCO();</b>
<b class="nc">&nbsp;            boolean change_2 = checkLibFull();</b>
<b class="nc">&nbsp;            if(change_1 || change_2)</b>
<b class="nc">&nbsp;                updateInfo();</b>
&nbsp;
<b class="nc">&nbsp;            sendDoneMove(); // send the move to the server</b>
&nbsp;            }
<b class="nc">&nbsp;        for(int i = 0; i &lt; cards.size(); i += 2)</b>
<b class="nc">&nbsp;            boardCards[cards.get(i)][cards.get(i + 1)].setBorder(BorderFactory.createLineBorder(borderColor, 0));</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * method for choosing the nickname of the player for the future game, implemented with the Swing GUI
&nbsp;     * @author Ettori Giammusso
&nbsp;     */
&nbsp;    private void showChooseNameWindow(){
<b class="nc">&nbsp;        mainFrame =  new JFrame(&quot;My Shelfie&quot;);</b>
<b class="nc">&nbsp;        mainPanel = new JPanel(new GridBagLayout());</b>
&nbsp;
&nbsp;        //PLACEHOLDERS:
<b class="nc">&nbsp;        JPanel tempPanel1 = new JPanel();</b>
<b class="nc">&nbsp;        tempPanel1.setPreferredSize(new Dimension(Dimensions.placeholderW, Dimensions.placeholderH));</b>
<b class="nc">&nbsp;        tempPanel1.setBackground(new java.awt.Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        tempPanel1.setOpaque(false);</b>
<b class="nc">&nbsp;        JPanel tempPanel2 = new JPanel();</b>
<b class="nc">&nbsp;        tempPanel2.setPreferredSize(new Dimension(Dimensions.placeholderW, Dimensions.placeholderH));</b>
<b class="nc">&nbsp;        tempPanel2.setBackground(new java.awt.Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        tempPanel2.setOpaque(false);</b>
&nbsp;
&nbsp;        //WALLPAPER:
&nbsp;        //if you want a random wallpaper, uncomment the following line and comment the next line
&nbsp;        //JLabel generalLabelChooseName = new JLabel(new ImageIcon(new ImageIcon(&quot;Publisher material/Display_&quot; + (new Random().nextInt(5) + 1) + &quot;.jpg&quot;).getImage().getScaledInstance(screenSize.width * 5 / 6, screenSize.height * 9 / 10, Image.SCALE_SMOOTH)));
<b class="nc">&nbsp;        JLabel generalLabelChooseName = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;Publisher material/Display_1.jpg&quot;)).getImage().getScaledInstance(screenSize.width * 5 / 6, screenSize.height * 9 / 10, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        generalLabelChooseName.setPreferredSize(new Dimension(screenSize.width * 5 / 6, screenSize.height * 8 / 10 + 65));</b>
<b class="nc">&nbsp;        generalLabelChooseName.setLayout(new GridBagLayout());</b>
&nbsp;
&nbsp;        //my shelfie title
<b class="nc">&nbsp;        JLabel myShelfieTitleLabel = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;Publisher material/Title 2000x618px.png&quot;)).getImage().getScaledInstance(screenSize.width * 4 / 6, screenSize.height * 4 / 10, Image.SCALE_SMOOTH)));</b>
&nbsp;
<b class="nc">&nbsp;        sendBtn = new JButton(&quot;Choose Name&quot;); // button to send the name</b>
<b class="nc">&nbsp;        textInput = new JTextField(20); // textbox input from the user</b>
&nbsp;
<b class="nc">&nbsp;        textInput.setBounds(100, 20, 165, 25);</b>
<b class="nc">&nbsp;        textInput.addActionListener(event -&gt; sendBtn.doClick()); // if you press enter on the keyboard, automatically use sendBtn</b>
&nbsp;
<b class="nc">&nbsp;        sendBtn.addActionListener((event) -&gt;{ // function of event listener</b>
<b class="nc">&nbsp;            NameStatus status = null;</b>
<b class="nc">&nbsp;            name = textInput.getText();</b>
<b class="nc">&nbsp;            if(name.length() == 0 || name.charAt(0) == &#39;@&#39; || name.equals(&quot;all&quot;) || name.equals(&quot;names&quot;) || name.equals(&quot;...&quot;) || name.equals(&quot;exit&quot;)){</b>
<b class="nc">&nbsp;                alert(&quot;Name invalid, choose another name&quot;);</b>
<b class="nc">&nbsp;                textInput.setText(&quot;&quot;);</b>
&nbsp;                return;
&nbsp;            }
&nbsp;            try {
<b class="nc">&nbsp;                outStream.writeObject(name);</b>
<b class="nc">&nbsp;                status = (NameStatus) inStream.readObject();</b>
<b class="nc">&nbsp;            }catch(Exception e){connectionLost(e);}</b>
&nbsp;
<b class="nc">&nbsp;            if(status == NameStatus.NOT_TAKEN){</b>
<b class="nc">&nbsp;                alert(&quot;\nName: &#39;&quot; + name + &quot;&#39; accepted by the server!&quot;);</b>
<b class="nc">&nbsp;                textInput.setVisible(false);</b>
<b class="nc">&nbsp;                sendBtn.setVisible(false);</b>
&nbsp;
<b class="nc">&nbsp;                gbc2.gridx = 0;</b>
<b class="nc">&nbsp;                gbc2.gridy = 3;</b>
<b class="nc">&nbsp;                generalLabelChooseName.add(tempPanel1,gbc2);</b>
<b class="nc">&nbsp;                gbc2.gridx = 0;</b>
<b class="nc">&nbsp;                gbc2.gridy = 4;</b>
<b class="nc">&nbsp;                generalLabelChooseName.add(tempPanel1,gbc2);</b>
&nbsp;
<b class="nc">&nbsp;                new Thread(this::getInitialState).start();</b>
&nbsp;                return;
&nbsp;            }
<b class="nc">&nbsp;            if(status == NameStatus.OLD){</b>
<b class="nc">&nbsp;                alert(&quot;\nName: &quot; + name + &quot; was found in a previous game&quot;);</b>
<b class="nc">&nbsp;                textInput.setVisible(false);</b>
<b class="nc">&nbsp;                sendBtn.setVisible(false);</b>
&nbsp;
<b class="nc">&nbsp;                gbc2.gridx = 0;</b>
<b class="nc">&nbsp;                gbc2.gridy = 3;</b>
<b class="nc">&nbsp;                generalLabelChooseName.add(tempPanel1,gbc2);</b>
<b class="nc">&nbsp;                gbc2.gridx = 0;</b>
<b class="nc">&nbsp;                gbc2.gridy = 4;</b>
<b class="nc">&nbsp;                generalLabelChooseName.add(tempPanel1,gbc2);</b>
&nbsp;
<b class="nc">&nbsp;                new Thread(this::getInitialState).start();</b>
&nbsp;                return;
&nbsp;            }
<b class="nc">&nbsp;            if(status == NameStatus.NOT_FOUND){</b>
<b class="nc">&nbsp;                alert(&quot;\nAnother game is running and your name was not found...&quot;);</b>
<b class="nc">&nbsp;                System.exit(0);</b>
&nbsp;            }
<b class="nc">&nbsp;            if(status == NameStatus.FOUND){</b>
<b class="nc">&nbsp;                textInput.setVisible(false);</b>
<b class="nc">&nbsp;                sendBtn.setVisible(false);</b>
&nbsp;
<b class="nc">&nbsp;                gbc2.gridx = 0;</b>
<b class="nc">&nbsp;                gbc2.gridy = 3;</b>
<b class="nc">&nbsp;                generalLabelChooseName.add(tempPanel1,gbc2);</b>
<b class="nc">&nbsp;                gbc2.gridx = 0;</b>
<b class="nc">&nbsp;                gbc2.gridy = 4;</b>
<b class="nc">&nbsp;                generalLabelChooseName.add(tempPanel1,gbc2);</b>
&nbsp;
<b class="nc">&nbsp;                new Thread(this::getPreviousState).start();</b>
&nbsp;                return;
&nbsp;            }
<b class="nc">&nbsp;            alert(&quot;Name Taken, choose another name&quot;);</b>
<b class="nc">&nbsp;            textInput.setText(&quot;&quot;);</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        gbc2.gridx=0;</b>
<b class="nc">&nbsp;        gbc2.gridy=0;</b>
<b class="nc">&nbsp;        generalLabelChooseName.add(myShelfieTitleLabel,gbc2);</b>
<b class="nc">&nbsp;        gbc2.gridx=0;</b>
<b class="nc">&nbsp;        gbc2.gridy=1;</b>
<b class="nc">&nbsp;        gbc2.insets = new Insets(0,0,15,0);</b>
<b class="nc">&nbsp;        generalLabelChooseName.add(textInput,gbc2);</b>
<b class="nc">&nbsp;        gbc2.gridx=0;</b>
<b class="nc">&nbsp;        gbc2.gridy=2;</b>
<b class="nc">&nbsp;        gbc2.insets = new Insets(0,0,0,0);</b>
<b class="nc">&nbsp;        generalLabelChooseName.add(sendBtn,gbc2);</b>
<b class="nc">&nbsp;        gbc2.gridx=0;</b>
<b class="nc">&nbsp;        gbc2.gridy=0;</b>
<b class="nc">&nbsp;        mainPanel.add(generalLabelChooseName,gbc2);</b>
&nbsp;
<b class="nc">&nbsp;        mainFrame.add(new JScrollPane(mainPanel), BorderLayout.CENTER);</b>
<b class="nc">&nbsp;        mainFrame.setSize((int) (Toolkit.getDefaultToolkit().getScreenSize().width * 0.9), (int) (Toolkit.getDefaultToolkit().getScreenSize().height * 0.9));</b>
<b class="nc">&nbsp;        mainFrame.setResizable(false);</b>
<b class="nc">&nbsp;        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</b>
<b class="nc">&nbsp;        mainFrame.setTitle(&quot;My Shelfie&quot;);</b>
<b class="nc">&nbsp;        mainFrame.setIconImage(new ImageIcon(classLoader.getResource(&quot;Publisher material/Icon 50x50px.png&quot;)).getImage());</b>
&nbsp;        //mainFrame.pack(); // setup of the window
<b class="nc">&nbsp;        mainFrame.setLocationRelativeTo(null); //the frame is centered when printed on the screen</b>
<b class="nc">&nbsp;        mainFrame.setVisible(true); // show the frame</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * Receive the status of the player (previously disconnected) from the server and restart the game
&nbsp;     * @author Ettori Faccincani
&nbsp;     */
&nbsp;    private void getPreviousState(){
&nbsp;        PlayerGUI p;
&nbsp;        try {
<b class="nc">&nbsp;            alert(&quot;Reconnecting to the running game...&quot;);</b>
<b class="nc">&nbsp;            p = new PlayerGUI((Player)inStream.readObject());</b>
<b class="nc">&nbsp;            clone(p);</b>
<b class="nc">&nbsp;            Thread th = new Thread(this::initGUI);</b>
<b class="nc">&nbsp;            th.start();</b>
<b class="nc">&nbsp;            th.join();</b>
<b class="nc">&nbsp;            updateInfo();</b>
<b class="nc">&nbsp;            if(netMode == NetMode.RMI)</b>
<b class="nc">&nbsp;                new Thread(this::listenForEndGame).start();</b>
<b class="nc">&nbsp;        }catch(Exception e){connectionLost(e);}</b>
&nbsp;        try {
<b class="nc">&nbsp;            server = (GameI)LocateRegistry.getRegistry(IP.activeIP, Initializer.PORT_RMI).lookup(&quot;Server&quot;);</b>
<b class="nc">&nbsp;        } catch (RemoteException | NotBoundException e) {</b>
<b class="nc">&nbsp;            connectionLost(e);</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if(netMode == NetMode.RMI) {</b>
&nbsp;            try {
<b class="nc">&nbsp;                server.addClient(name, this);</b>
<b class="nc">&nbsp;            } catch (RemoteException e) {</b>
<b class="nc">&nbsp;                connectionLost(e);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;        try {
<b class="nc">&nbsp;            outStream.writeObject(true);</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            connectionLost(e);</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        updateInfo();</b>
<b class="nc">&nbsp;        if(netMode == NetMode.SOCKET) {</b>
<b class="nc">&nbsp;            new Thread(this::waitForEvents).start();</b>
<b class="nc">&nbsp;            new Thread(this::ping).start();</b>
&nbsp;        }
&nbsp;        else
<b class="nc">&nbsp;            new Thread(this::pingRMI).start();</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * Receive the status of the player from the server and attend the start of the game
&nbsp;     * @author Ettori Faccincani
&nbsp;     */
&nbsp;    private void getInitialState(){
&nbsp;        PlayerGUI p;
&nbsp;        try {
&nbsp;            //alert(&quot;Be patient, the game will start soon...&quot;);
<b class="nc">&nbsp;            p = new PlayerGUI((Player)inStream.readObject());</b>
<b class="nc">&nbsp;            clone(p);</b>
<b class="nc">&nbsp;            activeName = chairmanName;</b>
<b class="nc">&nbsp;            Thread th = new Thread(this::initGUI);</b>
<b class="nc">&nbsp;            th.start();</b>
<b class="nc">&nbsp;            th.join();</b>
<b class="nc">&nbsp;            updateInfo();</b>
<b class="nc">&nbsp;            if(netMode == NetMode.RMI)</b>
<b class="nc">&nbsp;                new Thread(this::listenForEndGame).start();</b>
<b class="nc">&nbsp;        }catch(Exception e){connectionLost(e);}</b>
&nbsp;        try {
<b class="nc">&nbsp;            server = (GameI) LocateRegistry.getRegistry(IP.activeIP, Initializer.PORT_RMI).lookup(&quot;Server&quot;);</b>
<b class="nc">&nbsp;        } catch (RemoteException | NotBoundException e) {</b>
<b class="nc">&nbsp;            connectionLost(e);</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if(netMode == NetMode.RMI) {</b>
&nbsp;            try {
<b class="nc">&nbsp;                server.addClient(name, this);</b>
<b class="nc">&nbsp;            } catch (RemoteException e) {</b>
<b class="nc">&nbsp;                connectionLost(e);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;        try {
<b class="nc">&nbsp;            outStream.writeObject(true);</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            connectionLost(e);</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if(netMode == NetMode.SOCKET) {</b>
<b class="nc">&nbsp;            new Thread(this::waitForEvents).start();</b>
<b class="nc">&nbsp;            new Thread(this::ping).start();</b>
&nbsp;        }
&nbsp;        else
<b class="nc">&nbsp;            new Thread(this::pingRMI).start();</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * function used to wait for notification from the server while the player is NON active
&nbsp;     * @author Ettori Faccincani
&nbsp;     */
&nbsp;    private void waitForEvents(){
&nbsp;        while(true){
&nbsp;            try {
<b class="nc">&nbsp;                Message msg = (Message) inStream.readObject();</b>
<b class="nc">&nbsp;                switch (msg.getType()) {</b>
<b class="nc">&nbsp;                    case YOUR_TURN -&gt; handleYourTurnEvent();</b>
<b class="nc">&nbsp;                    case CHANGE_TURN -&gt; handleChangeTurnEvent(msg);</b>
<b class="nc">&nbsp;                    case UPDATE_UNPLAYABLE -&gt; handleUpdateUnplayableEvent(msg);</b>
<b class="nc">&nbsp;                    case UPDATE_GAME -&gt; handleUpdateGameEvent(msg);</b>
<b class="nc">&nbsp;                    case FINAL_SCORE -&gt; handleFinalScoreEvent(msg);</b>
<b class="nc">&nbsp;                    case CHAT -&gt; handleChatEvent(msg);</b>
<b class="nc">&nbsp;                    case CO_1 -&gt; handleCO_1Event(msg);</b>
<b class="nc">&nbsp;                    case CO_2 -&gt; handleCO_2Event(msg);</b>
<b class="nc">&nbsp;                    case LIB_FULL -&gt; handleLibFullEvent(msg);</b>
<b class="nc">&nbsp;                    case DISCONNECTED -&gt; handleDisconnectedEvent(msg);</b>
<b class="nc">&nbsp;                    case LOST_CLIENT -&gt; handleLostClientEvent(msg);</b>
<b class="nc">&nbsp;                    case SHOW_EVENT -&gt; handleShowEvent(msg);</b>
&nbsp;                }
<b class="nc">&nbsp;            }catch(Exception e){</b>
<b class="nc">&nbsp;                connectionLost(e);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the show event notification from the server
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleShowEvent(Message msg){
<b class="nc">&nbsp;        if(msg.getAuthor() != null &amp;&amp; msg.getAuthor().equals(&quot;win&quot;)){</b>
<b class="nc">&nbsp;            updateEventText(&quot; The game is finished, look at the results&quot;);</b>
<b class="nc">&nbsp;            alert((String) msg.getContent());</b>
<b class="nc">&nbsp;            Game.waitForSeconds(Game.waitTimer);</b>
<b class="nc">&nbsp;            System.exit(0);</b>
&nbsp;        }
<b class="nc">&nbsp;        updateEventText(&quot; &quot;  + msg.getContent());</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the client (not active) disconnection notification from the server
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleLostClientEvent(Message msg){
&nbsp;        try {
<b class="nc">&nbsp;            AudioInputStream audioInput = AudioSystem.getAudioInputStream(new BufferedInputStream(getClass().getResourceAsStream(&quot;/disconnect.wav&quot;)));</b>
<b class="nc">&nbsp;            Clip clip = AudioSystem.getClip();</b>
<b class="nc">&nbsp;            clip.open(audioInput);</b>
<b class="nc">&nbsp;            clip.start();</b>
<b class="nc">&nbsp;        }catch(Exception e){</b>
<b class="nc">&nbsp;            e.printStackTrace();</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        updateEventText(&quot; Player &quot; + msg.getAuthor() + &quot; disconnected from the game&quot;);</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the turn event notification from the server
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    private void handleYourTurnEvent(){
&nbsp;        try {
<b class="nc">&nbsp;            AudioInputStream audioInput = AudioSystem.getAudioInputStream(new BufferedInputStream(getClass().getResourceAsStream(&quot;/turn.wav&quot;)));</b>
<b class="nc">&nbsp;            Clip clip = AudioSystem.getClip();</b>
<b class="nc">&nbsp;            clip.open(audioInput);</b>
<b class="nc">&nbsp;            clip.start();</b>
<b class="nc">&nbsp;        }catch(Exception e){</b>
<b class="nc">&nbsp;            e.printStackTrace();</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        activeName = name;</b>
<b class="nc">&nbsp;        if(board.isBoardUnplayable())</b>
<b class="nc">&nbsp;            fixUnplayableBoard();</b>
<b class="nc">&nbsp;        if(!endGame) {</b>
<b class="nc">&nbsp;            updateBoard();</b>
<b class="nc">&nbsp;            updateOtherLibraries();</b>
&nbsp;        }
<b class="nc">&nbsp;        updateInfo();</b>
<b class="nc">&nbsp;        updateEventText(&quot; Your turn is now started, play your move !&quot;);</b>
<b class="nc">&nbsp;        turnThread = new Thread(() -&gt;{</b>
&nbsp;            try {
<b class="nc">&nbsp;                Thread.sleep(1000 * 60 * 5);</b>
<b class="nc">&nbsp;            } catch (InterruptedException e) {</b>
&nbsp;                return;
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if(activeName.equals(name))</b>
<b class="nc">&nbsp;                sendDoneMove();</b>
&nbsp;        });
<b class="nc">&nbsp;        turnThread.start();</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the change event notification from the server
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleChangeTurnEvent(Message msg){
<b class="nc">&nbsp;        activeName = (String) msg.getContent();</b>
<b class="nc">&nbsp;        updateInfo();</b>
<b class="nc">&nbsp;        updateBoard();</b>
<b class="nc">&nbsp;        updateOtherLibraries();</b>
<b class="nc">&nbsp;        updateEventText(&quot; Now &quot; + activeName + &quot; is playing his turn...&quot;);</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the unplayble board fixing event notification from the server
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleUpdateUnplayableEvent(Message msg){
<b class="nc">&nbsp;        board = (Board) msg.getContent();</b>
<b class="nc">&nbsp;        updateBoard();</b>
<b class="nc">&nbsp;        updateEventText(&quot; Board updated because it was unplayable&quot;);</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the update game notification from the server
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleUpdateGameEvent(Message msg){
<b class="nc">&nbsp;        if(netMode == NetMode.SOCKET)</b>
<b class="nc">&nbsp;            sendToServer(new Message(MessageType.STOP, null, null));</b>
<b class="nc">&nbsp;        PlayerSend p = (PlayerSend) msg.getContent();</b>
<b class="nc">&nbsp;        board = p.board;</b>
<b class="nc">&nbsp;        for(int i = 0; i &lt; numPlayers - 1; i++){</b>
<b class="nc">&nbsp;            if(librariesOfOtherPlayers.get(i).name.equals(msg.getAuthor()))</b>
<b class="nc">&nbsp;                librariesOfOtherPlayers.set(i, p.library);</b>
&nbsp;        }
<b class="nc">&nbsp;        pointsMap.put(msg.getAuthor(), p.pointsUntilNow);</b>
<b class="nc">&nbsp;        if(endGame)</b>
<b class="nc">&nbsp;            updateGUI();</b>
<b class="nc">&nbsp;        updateEventText(&quot; Player &quot; + msg.getAuthor() + &quot; made his move, now wait for the turn to change...&quot;);</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the final score calculation event notification from the server
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleFinalScoreEvent(Message msg){
&nbsp;        try {
<b class="nc">&nbsp;            AudioInputStream audioInput = AudioSystem.getAudioInputStream(new BufferedInputStream(getClass().getResourceAsStream(&quot;/ending.wav&quot;)));</b>
<b class="nc">&nbsp;            Clip clip = AudioSystem.getClip();</b>
<b class="nc">&nbsp;            clip.open(audioInput);</b>
<b class="nc">&nbsp;            clip.start();</b>
<b class="nc">&nbsp;        }catch(Exception e){</b>
<b class="nc">&nbsp;            e.printStackTrace();</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        updateEventText(&quot; The game is finished, look at the results&quot;);</b>
<b class="nc">&nbsp;        alert(&quot;\nThe game is finished, this is the final scoreboard:\n\n&quot; + msg.getContent());</b>
<b class="nc">&nbsp;        Game.waitForSeconds(Game.showTimer);</b>
<b class="nc">&nbsp;        System.exit(0);</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the chat message event notification from the server
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleChatEvent(Message msg){
<b class="nc">&nbsp;        fullChat += msg.getContent();</b>
<b class="nc">&nbsp;        updateInfo();</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the achievement of the first common objective event notification from the server
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleCO_1Event(Message msg){
<b class="nc">&nbsp;        updateEventText(&quot; &quot; + msg.getAuthor() + &quot; completed the first common objective getting &quot; + msg.getContent() + &quot; points&quot;);</b>
<b class="nc">&nbsp;        board.pointsCO_1.remove(board.pointsCO_1.size() - 1);</b>
<b class="nc">&nbsp;        updateInfo();</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the achievement of the second common objective event notification from the server
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleCO_2Event(Message msg){
<b class="nc">&nbsp;        updateEventText(&quot; &quot; + msg.getAuthor() + &quot; completed the second common objective getting &quot; + msg.getContent() + &quot; points&quot;);</b>
<b class="nc">&nbsp;        board.pointsCO_2.remove(board.pointsCO_2.size() - 1);</b>
<b class="nc">&nbsp;        updateInfo();</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the completion of the library event notification from the server
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleLibFullEvent(Message msg){
<b class="nc">&nbsp;        updateEventText(&quot; &quot; + msg.getAuthor() + &quot; completed the library, the game will continue until the next turn of &quot; + chairmanName);</b>
<b class="nc">&nbsp;        endGame = true;</b>
<b class="nc">&nbsp;        boardCards[libFullX][libFullY].setVisible(false);</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for handling the disconnection event notification from the server (of the active client)
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message containing the necessary information for reacting to the event
&nbsp;     */
&nbsp;    private void handleDisconnectedEvent(Message msg){
<b class="nc">&nbsp;        updateEventText(&quot; The active player (&quot; + msg.getAuthor() + &quot;) disconnected from the game&quot;);</b>
<b class="nc">&nbsp;        if(netMode == NetMode.SOCKET)</b>
<b class="nc">&nbsp;            sendToServer(new Message(MessageType.STOP, null, null));</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that checks if the current player completed a common objective, and in that case notify all the other players (and add the points)
&nbsp;     * @author Ettori
&nbsp;     * @return true iff one of the objectives was completed
&nbsp;     */
&nbsp;    private boolean checkCO(){
&nbsp;        int points, lastIndex;
<b class="nc">&nbsp;        boolean change = false;</b>
&nbsp;        try {
<b class="nc">&nbsp;            if (board.commonObjective_1.algorithm.checkMatch(library.gameLibrary) &amp;&amp; !CO_1_Done &amp;&amp; board.pointsCO_1.size() &gt; 0) { // you can&#39;t take the CO if you already did</b>
&nbsp;                try {
<b class="nc">&nbsp;                    AudioInputStream audioInput = AudioSystem.getAudioInputStream(new BufferedInputStream(getClass().getResourceAsStream(&quot;/CO1.wav&quot;)));</b>
<b class="nc">&nbsp;                    Clip clip = AudioSystem.getClip();</b>
<b class="nc">&nbsp;                    clip.open(audioInput);</b>
<b class="nc">&nbsp;                    clip.start();</b>
<b class="nc">&nbsp;                }catch(Exception e){</b>
<b class="nc">&nbsp;                    e.printStackTrace();</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                lastIndex = board.pointsCO_1.size() - 1;</b>
<b class="nc">&nbsp;                points = board.pointsCO_1.get(lastIndex);</b>
<b class="nc">&nbsp;                board.pointsCO_1.remove(lastIndex);</b>
<b class="nc">&nbsp;                pointsUntilNow += points;</b>
<b class="nc">&nbsp;                CO_1_Done = true;</b>
<b class="nc">&nbsp;                sendToServer(new Message(MessageType.CO_1, name, Integer.toString(points)));</b>
<b class="nc">&nbsp;                updateEventText(&quot; Well done, you completed the first common objective and you gain &quot; + points + &quot; points...&quot;);</b>
<b class="nc">&nbsp;                Game.waitForSeconds(Game.showTimer);</b>
<b class="nc">&nbsp;                change = true;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (board.commonObjective_2.algorithm.checkMatch(library.gameLibrary) &amp;&amp; !CO_2_Done &amp;&amp; board.pointsCO_2.size() &gt; 0) {</b>
&nbsp;                try {
<b class="nc">&nbsp;                    AudioInputStream audioInput = AudioSystem.getAudioInputStream(new BufferedInputStream(getClass().getResourceAsStream(&quot;/CO2.wav&quot;)));</b>
<b class="nc">&nbsp;                    Clip clip = AudioSystem.getClip();</b>
<b class="nc">&nbsp;                    clip.open(audioInput);</b>
<b class="nc">&nbsp;                    clip.start();</b>
<b class="nc">&nbsp;                }catch(Exception e){</b>
<b class="nc">&nbsp;                    e.printStackTrace();</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                lastIndex = board.pointsCO_2.size() - 1;</b>
<b class="nc">&nbsp;                points = board.pointsCO_2.get(lastIndex);</b>
<b class="nc">&nbsp;                board.pointsCO_2.remove(lastIndex);</b>
<b class="nc">&nbsp;                pointsUntilNow += points;</b>
<b class="nc">&nbsp;                CO_2_Done = true;</b>
<b class="nc">&nbsp;                sendToServer(new Message(MessageType.CO_2, name, Integer.toString(points)));</b>
<b class="nc">&nbsp;                updateEventText(&quot; Well done, you completed the second common objective and you gain &quot; + points + &quot; points...&quot;);</b>
<b class="nc">&nbsp;                Game.waitForSeconds(Game.showTimer);</b>
<b class="nc">&nbsp;                change = true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }catch(Exception e){connectionLost(e);}</b>
<b class="nc">&nbsp;        return change;</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that checks if the current player completed his library, and in that case notify all the other players (and add 1 point)
&nbsp;     * @author Ettori
&nbsp;     * @return true iff the library was completed
&nbsp;     */
&nbsp;    private boolean checkLibFull(){
&nbsp;        try {
<b class="nc">&nbsp;            if (library.isFull() &amp;&amp; !endGame) {</b>
&nbsp;                try {
<b class="nc">&nbsp;                    AudioInputStream audioInput = AudioSystem.getAudioInputStream(new BufferedInputStream(getClass().getResourceAsStream(&quot;/library.wav&quot;)));</b>
<b class="nc">&nbsp;                    Clip clip = AudioSystem.getClip();</b>
<b class="nc">&nbsp;                    clip.open(audioInput);</b>
<b class="nc">&nbsp;                    clip.start();</b>
<b class="nc">&nbsp;                }catch(Exception e){</b>
<b class="nc">&nbsp;                    e.printStackTrace();</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                endGame = true;</b>
<b class="nc">&nbsp;                pointsUntilNow++;</b>
<b class="nc">&nbsp;                sendToServer(new Message(MessageType.LIB_FULL, name, null));</b>
<b class="nc">&nbsp;                updateEventText(&quot; Well done, you are the first player to complete the library, the game will continue until the next turn of &quot; + chairmanName + &quot;...&quot;);</b>
<b class="nc">&nbsp;                updateBoard();</b>
<b class="nc">&nbsp;                Game.waitForSeconds(Game.showTimer);</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }catch (Exception e){connectionLost(e);}</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper method which update the board when it becomes unplayable (also notify other players)
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    private void fixUnplayableBoard(){
<b class="nc">&nbsp;        board.fillBoard(numPlayers);</b>
<b class="nc">&nbsp;        updateGUI();</b>
<b class="nc">&nbsp;        updateEventText(&quot; Board updated because it was unplayble&quot;);</b>
&nbsp;        try {
<b class="nc">&nbsp;            sendToServer(new Message(MessageType.UPDATE_UNPLAYABLE, name, new Board(board)));</b>
<b class="nc">&nbsp;        }catch (Exception e){connectionLost(e);}</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that sends the last move done by the current player to all other clients (after the move is done on this player)
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    private void sendDoneMove(){
<b class="nc">&nbsp;        updateEventText(&quot; You made your move, now wait for other players to acknowledge it...&quot;);</b>
<b class="nc">&nbsp;        sendToServer(new Message(MessageType.UPDATE_GAME, name, new PlayerSend(this)));</b>
<b class="nc">&nbsp;        turnThread.interrupt();</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * Send with socket network the message of the chat to the right players
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    public void sendChatMsg(){
<b class="nc">&nbsp;        String dest = insertPlayer.getText();</b>
<b class="nc">&nbsp;        String msg = insertMessage.getText();</b>
<b class="nc">&nbsp;        insertPlayer.setText(&quot;&quot;);</b>
<b class="nc">&nbsp;        insertMessage.setText(&quot;&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        msg = name + &quot; says: &quot; + msg + &quot; (to &quot; + dest + &quot;) at &quot; + new SimpleDateFormat(&quot;dd-MM-yyyy HH:mm:ss&quot;).format(new Date()) + &quot;\n&quot;;</b>
&nbsp;
<b class="nc">&nbsp;        if(!doesPlayerExists(dest) &amp;&amp; !dest.equals(&quot;all&quot;)) {</b>
<b class="nc">&nbsp;            alert(&quot;\nThe name chosen does not exists&quot;);</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        if(dest.equals(name)){</b>
<b class="nc">&nbsp;            alert(&quot;\nYou can&#39;t send chat messages to yourself&quot;);</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        fullChat += msg;</b>
<b class="nc">&nbsp;        tempChatHistory.setText(fullChat);</b>
&nbsp;        try{
<b class="nc">&nbsp;            sendToServer(new Message(MessageType.CHAT, dest, msg));</b>
<b class="nc">&nbsp;        }catch(Exception e){connectionLost(e);}</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * helper function for alerting a message to the user (pop-up)
&nbsp;     * @param s the string og the message to show
&nbsp;     */
<b class="nc">&nbsp;    private void alert(String s){showMessageDialog(null, s);}</b>
&nbsp;    /**
&nbsp;     * function that handle the eventual disconnection
&nbsp;     * @param e the exception to throw
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    public void connectionLost(Exception e){
<b class="nc">&nbsp;        if(closed)</b>
&nbsp;            return;
<b class="nc">&nbsp;        closed = true;</b>
&nbsp;        if(Player.showErrors)
&nbsp;            throw new RuntimeException(e);
&nbsp;        else
<b class="nc">&nbsp;            new Thread(() -&gt; updateEventText(&quot; The connection was lost and the application is disconnecting...&quot;)).start();</b>
<b class="nc">&nbsp;        Game.waitForSeconds(Game.waitTimer);</b>
<b class="nc">&nbsp;        System.out.println(&quot;\nThe connection was lost and the application is disconnecting...\n&quot;);</b>
<b class="nc">&nbsp;        System.exit(0);</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that periodically pings the server from socket client
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    public void ping(){
&nbsp;        while(true){
<b class="nc">&nbsp;            Game.waitForSeconds(Game.waitTimer * 2);</b>
&nbsp;            try {
<b class="nc">&nbsp;                outStream.writeObject(new Message(MessageType.PING, null, null));</b>
<b class="nc">&nbsp;            } catch (IOException e) {</b>
<b class="nc">&nbsp;                connectionLost(e);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that periodically pings the server from RMI client
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    public void pingRMI(){
&nbsp;        while(true){
<b class="nc">&nbsp;            Game.waitForSeconds(Game.waitTimer * 2);</b>
&nbsp;            try {
<b class="nc">&nbsp;                server.ping();</b>
<b class="nc">&nbsp;            } catch (RemoteException e) {</b>
<b class="nc">&nbsp;                connectionLost(e);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;    }
&nbsp;    /******************************************** RMI ***************************************************************/
&nbsp;    /**
&nbsp;     * method (called from remote) that is the equivalent of wait for events of the socket version
&nbsp;     * @param msg the message received from the server
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    public void receivedEventRMI(Message msg){
<b class="nc">&nbsp;        switch (msg.getType()) {</b>
<b class="nc">&nbsp;            case YOUR_TURN -&gt; handleYourTurnEvent();</b>
<b class="nc">&nbsp;            case CHANGE_TURN -&gt; handleChangeTurnEvent(msg);</b>
<b class="nc">&nbsp;            case UPDATE_UNPLAYABLE -&gt; handleUpdateUnplayableEvent(msg);</b>
<b class="nc">&nbsp;            case UPDATE_GAME -&gt; handleUpdateGameEvent(msg);</b>
<b class="nc">&nbsp;            case FINAL_SCORE -&gt; handleFinalScoreEvent(msg);</b>
<b class="nc">&nbsp;            case CHAT -&gt; handleChatEvent(msg);</b>
<b class="nc">&nbsp;            case CO_1 -&gt; handleCO_1Event(msg);</b>
<b class="nc">&nbsp;            case CO_2 -&gt; handleCO_2Event(msg);</b>
<b class="nc">&nbsp;            case LIB_FULL -&gt; handleLibFullEvent(msg);</b>
<b class="nc">&nbsp;            case DISCONNECTED -&gt; handleDisconnectedEvent(msg);</b>
<b class="nc">&nbsp;            case LOST_CLIENT -&gt; handleLostClientEvent(msg);</b>
<b class="nc">&nbsp;            case SHOW_EVENT -&gt; handleShowEvent(msg);</b>
&nbsp;        }
&nbsp;    }
&nbsp;    /**
&nbsp;     * general method to send a message to the server, it chooses the right network connection of the player
&nbsp;     * @author Ettori
&nbsp;     * @param msg the message that must be sent
&nbsp;     */
&nbsp;    public void sendToServer(Message msg){
<b class="nc">&nbsp;        if(netMode == NetMode.SOCKET) {</b>
&nbsp;            try {
<b class="nc">&nbsp;                outStream.writeObject(msg);</b>
<b class="nc">&nbsp;            } catch (IOException e) {</b>
<b class="nc">&nbsp;                connectionLost(e);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;        else{
&nbsp;            try {
<b class="nc">&nbsp;                server.redirectToClientRMI(msg);</b>
<b class="nc">&nbsp;            } catch (RemoteException e) {</b>
<b class="nc">&nbsp;                connectionLost(e);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that listen for the final score of the game, for RMI clients
&nbsp;     * @author Ettori
&nbsp;     */
&nbsp;    private void listenForEndGame(){
<b class="nc">&nbsp;        Message msg = null;</b>
&nbsp;        while(true) {
&nbsp;            try {
<b class="nc">&nbsp;                msg = (Message) inStream.readObject();</b>
<b class="nc">&nbsp;            } catch (IOException | ClassNotFoundException e) {</b>
<b class="nc">&nbsp;                connectionLost(e);</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if (msg == null)</b>
<b class="nc">&nbsp;                connectionLost(new NullPointerException());</b>
<b class="nc">&nbsp;            if (msg.getType() != MessageType.FINAL_SCORE)</b>
<b class="nc">&nbsp;                connectionLost(new RuntimeException(&quot;listenForEndGame method in GUI received a message different than FINAL_SCORE&quot;));</b>
<b class="nc">&nbsp;            handleFinalScoreEvent(msg);</b>
&nbsp;        }
&nbsp;    }
&nbsp;    /**
&nbsp;     * method that allow the server ping the RMI client
&nbsp;     * @author Ettori
&nbsp;     */
<b class="nc">&nbsp;    public void pingClient(){}</b>
&nbsp;    /**
&nbsp;     * Function that initialize all the GUI
&nbsp;     * @author Ettori Faccincani Giammusso
&nbsp;     */
&nbsp;    public void initGUI(){
&nbsp;        //Creation:
&nbsp;        //External
&nbsp;        //Internals: first level of abstraction
&nbsp;
&nbsp;
&nbsp;        //Internals: second level of abstraction
<b class="nc">&nbsp;        gbc.insets = new Insets(Dimensions.generalBorder, Dimensions.generalBorder, Dimensions.generalBorder, Dimensions.generalBorder);</b>
&nbsp;
&nbsp;        //CYAN
&nbsp;
<b class="nc">&nbsp;        POLabel = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(objective.imagePath)).getImage().getScaledInstance(Dimensions.PO_w, Dimensions.PO_h, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        POLabel.setPreferredSize(new Dimension(Dimensions.PO_w, Dimensions.PO_h));</b>
&nbsp;
<b class="nc">&nbsp;        POPanel = new JPanel(new GridBagLayout());</b>
<b class="nc">&nbsp;        POTitle = new JTextField(&quot; Your private objective &quot;);</b>
<b class="nc">&nbsp;        POTitle.setMinimumSize(new Dimension(Dimensions.textCols * Dimensions.textCharsNum, Dimensions.textCols));</b>
<b class="nc">&nbsp;        POTitle.setEditable(false);</b>
<b class="nc">&nbsp;        POTitle.setBorder(null);</b>
&nbsp;
<b class="nc">&nbsp;        CO1Label = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(board.commonObjective_1.imagePath)).getImage().getScaledInstance(Dimensions.CO_w, Dimensions.CO_h, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        CO1Label.setLayout(null);</b>
<b class="nc">&nbsp;        CO1Label.setPreferredSize(new Dimension(Dimensions.CO_w, Dimensions.CO_h));</b>
&nbsp;
<b class="nc">&nbsp;        CO1Panel = new JPanel(new GridBagLayout());</b>
<b class="nc">&nbsp;        CO1Title = new JTextField(&quot; The first common objective &quot;);</b>
<b class="nc">&nbsp;        CO1Title.setBorder(null);</b>
<b class="nc">&nbsp;        CO1Title.setMinimumSize(new Dimension(Dimensions.textCols * Dimensions.textCharsNum, Dimensions.textCols));</b>
<b class="nc">&nbsp;        CO1Title.setEditable(false);</b>
&nbsp;
<b class="nc">&nbsp;        CO2Label = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(board.commonObjective_2.imagePath)).getImage().getScaledInstance(Dimensions.CO_w, Dimensions.CO_h, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        CO2Label.setLayout(null);</b>
<b class="nc">&nbsp;        CO2Label.setPreferredSize(new Dimension(Dimensions.CO_w, Dimensions.CO_h));</b>
&nbsp;
<b class="nc">&nbsp;        CO2Panel = new JPanel(new GridBagLayout());</b>
<b class="nc">&nbsp;        CO2Title = new JTextField(&quot; The second common objective &quot;);</b>
<b class="nc">&nbsp;        CO2Title.setBorder(null);</b>
<b class="nc">&nbsp;        CO2Title.setMinimumSize(new Dimension(Dimensions.textCols * Dimensions.textCharsNum, Dimensions.textCols));</b>
<b class="nc">&nbsp;        CO2Title.setEditable(false);</b>
&nbsp;
<b class="nc">&nbsp;        pointsCO1Label = new JLabel(new ImageIcon (new ImageIcon(classLoader.getResource(&quot;scoring tokens/scoring.jpg&quot;)).getImage().getScaledInstance(Dimensions.pointsDim, Dimensions.pointsDim, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        pointsCO1Label.setPreferredSize(new Dimension(Dimensions.pointsDim, Dimensions.pointsDim));</b>
&nbsp;
<b class="nc">&nbsp;        pointsCO2Label = new JLabel(new ImageIcon (new ImageIcon(classLoader.getResource(&quot;scoring tokens/scoring.jpg&quot;)).getImage().getScaledInstance(Dimensions.pointsDim, Dimensions.pointsDim, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        pointsCO2Label.setPreferredSize(new Dimension(Dimensions.pointsDim, Dimensions.pointsDim));</b>
&nbsp;
<b class="nc">&nbsp;        chairmanLabel = new JLabel(isChairMan ? new ImageIcon (new ImageIcon(classLoader.getResource(&quot;misc/firstplayertoken.png&quot;)).getImage().getScaledInstance(Dimensions.chairmanDim, Dimensions.chairmanDim, Image.SCALE_SMOOTH)) : new ImageIcon (new ImageIcon(classLoader.getResource(&quot;misc/sfondo parquet.jpg&quot;)).getImage().getScaledInstance(Dimensions.chairmanDim, Dimensions.chairmanDim, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        chairmanLabel.setPreferredSize(new Dimension(Dimensions.chairmanDim, Dimensions.chairmanDim));</b>
&nbsp;
<b class="nc">&nbsp;        chairmanPanel = new JPanel(new GridBagLayout());</b>
<b class="nc">&nbsp;        chairmanTitle = new JTextField(&quot; Chairman Icon &quot;);</b>
<b class="nc">&nbsp;        chairmanTitle.setBorder(null);</b>
<b class="nc">&nbsp;        chairmanTitle.setMinimumSize(new Dimension(Dimensions.textCols * Dimensions.textCharsNum, Dimensions.textCols));</b>
<b class="nc">&nbsp;        chairmanTitle.setEditable(false);</b>
&nbsp;
<b class="nc">&nbsp;        chairmanPanel.setVisible(isChairMan);</b>
&nbsp;
<b class="nc">&nbsp;        infoBox = new JPanel(new GridBagLayout());</b>
<b class="nc">&nbsp;        chairmanInfo = new JTextField();</b>
<b class="nc">&nbsp;        chairmanInfo.setText(&quot; The chairman is &quot; + chairmanName + &quot; &quot;);</b>
<b class="nc">&nbsp;        chairmanInfo.setBorder(null);</b>
<b class="nc">&nbsp;        chairmanInfo.setMinimumSize(new Dimension(Dimensions.textCols * (Dimensions.textCharsNum + 2), Dimensions.textCols));</b>
<b class="nc">&nbsp;        chairmanInfo.setEditable(false);</b>
<b class="nc">&nbsp;        activeTurnInfo = new JTextField();</b>
<b class="nc">&nbsp;        activeTurnInfo.setBorder(null);</b>
<b class="nc">&nbsp;        activeTurnInfo.setMinimumSize(new Dimension(Dimensions.textCols * (Dimensions.textCharsNum + 2), Dimensions.textCols));</b>
<b class="nc">&nbsp;        activeTurnInfo.setEditable(false);</b>
<b class="nc">&nbsp;        curPointsInfo = new JTextField();</b>
<b class="nc">&nbsp;        curPointsInfo.setBorder(null);</b>
<b class="nc">&nbsp;        curPointsInfo.setMinimumSize(new Dimension(Dimensions.textCols * (Dimensions.textCharsNum + 2), Dimensions.textCols));</b>
<b class="nc">&nbsp;        curPointsInfo.setEditable(false);</b>
<b class="nc">&nbsp;        titleInfo = new JTextField(&quot; INFORMATIONS ABOUT THE GAME &quot;);</b>
<b class="nc">&nbsp;        titleInfo.setBorder(null);</b>
<b class="nc">&nbsp;        titleInfo.setMinimumSize(new Dimension(Dimensions.textCols * (Dimensions.textCharsNum + 2), Dimensions.textCols));</b>
<b class="nc">&nbsp;        titleInfo.setEditable(false);</b>
&nbsp;
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.25;</b>
<b class="nc">&nbsp;        infoBox.add(titleInfo,gbc);</b>
<b class="nc">&nbsp;        gbc.fill = HORIZONTAL;</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.25;</b>
<b class="nc">&nbsp;        infoBox.add(chairmanInfo,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 2;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.25;</b>
<b class="nc">&nbsp;        infoBox.add(activeTurnInfo,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 3;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.25;</b>
<b class="nc">&nbsp;        infoBox.add(curPointsInfo,gbc);</b>
<b class="nc">&nbsp;        gbc.fill = NONE;</b>
&nbsp;
&nbsp;        //
&nbsp;
&nbsp;        //Internals: third level of abstraction
&nbsp;        //...in development
&nbsp;
&nbsp;        //Addition: (Hierarchy of panels inside panels)
&nbsp;        //SECOND LEVEL
&nbsp;        //CYAN
<b class="nc">&nbsp;        internalPanelSide = new JPanel(new GridBagLayout());</b>
<b class="nc">&nbsp;        Insets insets = CO1Label.getInsets();</b>
&nbsp;
<b class="nc">&nbsp;        CO1Label.add(pointsCO1Label);</b>
<b class="nc">&nbsp;        pointsCO1Label.setBounds(insets.left + 85, insets.top + 27, Dimensions.pointsDim, Dimensions.pointsDim);</b>
&nbsp;
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.anchor = CENTER;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.1;</b>
<b class="nc">&nbsp;        CO1Panel.add(CO1Title, gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.9;</b>
<b class="nc">&nbsp;        CO1Panel.add(CO1Label,gbc);</b>
<b class="nc">&nbsp;        gbc.weighty = 0.2;</b>
<b class="nc">&nbsp;        gbc.anchor = CENTER;</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 100;</b>
<b class="nc">&nbsp;        gbc.insets = new Insets(25,0,0,0);</b>
<b class="nc">&nbsp;        internalPanelSide.add(CO1Panel,gbc);</b>
<b class="nc">&nbsp;        gbc.insets = new Insets(Dimensions.generalBorder, Dimensions.generalBorder, Dimensions.generalBorder, Dimensions.generalBorder);</b>
&nbsp;
<b class="nc">&nbsp;        insets = CO2Label.getInsets();</b>
&nbsp;
<b class="nc">&nbsp;        CO2Label.add(pointsCO2Label);</b>
<b class="nc">&nbsp;        pointsCO2Label.setBounds(insets.left + 85, insets.top + 27, Dimensions.pointsDim, Dimensions.pointsDim);</b>
&nbsp;
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.anchor = CENTER;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.1;</b>
<b class="nc">&nbsp;        CO2Panel.add(CO2Title, gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.9;</b>
<b class="nc">&nbsp;        CO2Panel.add(CO2Label,gbc);</b>
<b class="nc">&nbsp;        gbc.anchor = CENTER;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.2;</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 100;</b>
<b class="nc">&nbsp;        internalPanelSide.add(CO2Panel,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.anchor = CENTER;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.1;</b>
<b class="nc">&nbsp;        POPanel.add(POTitle, gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.9;</b>
<b class="nc">&nbsp;        POPanel.add(POLabel,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 2;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 100;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.2;</b>
<b class="nc">&nbsp;        internalPanelSide.add(POPanel, gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.anchor = CENTER;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.1;</b>
<b class="nc">&nbsp;        chairmanPanel.add(chairmanTitle, gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.9;</b>
<b class="nc">&nbsp;        chairmanPanel.add(chairmanLabel,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 3;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 100;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.2;</b>
<b class="nc">&nbsp;        internalPanelSide.add(chairmanPanel, gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 4;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 100;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.2;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.insets = new Insets(0,0,25,0);</b>
<b class="nc">&nbsp;        internalPanelSide.add(infoBox, gbc);</b>
<b class="nc">&nbsp;        gbc.insets = new Insets(Dimensions.generalBorder, Dimensions.generalBorder, Dimensions.generalBorder, Dimensions.generalBorder);</b>
<b class="nc">&nbsp;        gbc.weightx = 0.0;</b>
&nbsp;
&nbsp;        //GREEN
<b class="nc">&nbsp;        internalPanelLow = new JPanel(new GridBagLayout());</b>
&nbsp;
<b class="nc">&nbsp;        player1Panel = new JPanel(new GridBagLayout());</b>
&nbsp;        //Text
<b class="nc">&nbsp;        library1Text = new JTextArea(1, Dimensions.textCols * 2 / 3);</b>
<b class="nc">&nbsp;        library1Text.setEditable(false);</b>
&nbsp;        //Library of the player 1
<b class="nc">&nbsp;        library1Label = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;boards/bookshelf_orth.png&quot;)).getImage().getScaledInstance(Dimensions.lib_w, Dimensions.lib_h, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        library1Label.setLayout(null);</b>
<b class="nc">&nbsp;        library1Label.setPreferredSize(new Dimension(Dimensions.lib_w, Dimensions.lib_h));</b>
&nbsp;
<b class="nc">&nbsp;        player2Panel = new JPanel(new GridBagLayout());</b>
&nbsp;
&nbsp;        //Text
<b class="nc">&nbsp;        library2Text = new JTextArea(1, Dimensions.textCols * 2 / 3);</b>
<b class="nc">&nbsp;        library2Text.setEditable(false);</b>
&nbsp;
&nbsp;        //Library of the player 2
<b class="nc">&nbsp;        library2Label = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;boards/bookshelf_orth.png&quot;)).getImage().getScaledInstance(Dimensions.lib_w, Dimensions.lib_h, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        library2Label.setLayout(null);</b>
<b class="nc">&nbsp;        library1Label.setPreferredSize(new Dimension(Dimensions.lib_w, Dimensions.lib_h));</b>
&nbsp;
<b class="nc">&nbsp;        player3Panel = new JPanel(new GridBagLayout());</b>
&nbsp;
&nbsp;        //Text
<b class="nc">&nbsp;        library3Text = new JTextArea(1, Dimensions.textCols * 2 / 3);</b>
<b class="nc">&nbsp;        library3Text.setEditable(false);</b>
&nbsp;
&nbsp;        //Library of the player 3
<b class="nc">&nbsp;        library3Label = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;boards/bookshelf_orth.png&quot;)).getImage().getScaledInstance(Dimensions.lib_w, Dimensions.lib_h, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        library3Label.setLayout(null);</b>
<b class="nc">&nbsp;        library1Label.setPreferredSize(new Dimension(Dimensions.lib_w, Dimensions.lib_h));</b>
&nbsp;
<b class="nc">&nbsp;        library1Text.setText(&quot; Library of &quot; + librariesOfOtherPlayers.get(0).name + &quot; &quot;);</b>
<b class="nc">&nbsp;        if(numPlayers &gt;= 3)</b>
<b class="nc">&nbsp;            library2Text.setText(&quot; Library of &quot; + librariesOfOtherPlayers.get(1).name + &quot; &quot;);</b>
<b class="nc">&nbsp;        if(numPlayers &gt;= 4)</b>
<b class="nc">&nbsp;            library3Text.setText(&quot; Library of &quot; + librariesOfOtherPlayers.get(2).name + &quot; &quot;);</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;        if(numPlayers &lt; 4)</b>
<b class="nc">&nbsp;            player3Panel.setVisible(false);</b>
<b class="nc">&nbsp;        if(numPlayers &lt; 3)</b>
<b class="nc">&nbsp;            player2Panel.setVisible(false);</b>
&nbsp;
&nbsp;
&nbsp;        JLabel tempLabel;
&nbsp;        JPanel tempPanel;
<b class="nc">&nbsp;        insets = library1Label.getInsets();</b>
&nbsp;        // fill library
<b class="nc">&nbsp;        for(int i = 0; i &lt; ROWS; i++){</b>
<b class="nc">&nbsp;            for(int j = 0; j &lt; COLS; j++){</b>
<b class="nc">&nbsp;                tempLabel = new JLabel();</b>
<b class="nc">&nbsp;                tempPanel = new JPanel();</b>
&nbsp;
<b class="nc">&nbsp;                tempLabel.setPreferredSize(new Dimension(Dimensions.cardLib_w, Dimensions.cardLib_h));</b>
<b class="nc">&nbsp;                tempLabel.setVisible(false);</b>
&nbsp;
<b class="nc">&nbsp;                tempPanel.add(tempLabel);</b>
<b class="nc">&nbsp;                tempPanel.setPreferredSize(new Dimension(Dimensions.cardLib_w, Dimensions.cardLib_h));</b>
<b class="nc">&nbsp;                tempPanel.setBackground(new java.awt.Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;                tempPanel.setOpaque(false);</b>
&nbsp;
<b class="nc">&nbsp;                tempPanel.setBounds(insets.left + (Dimensions.cardLib_w * j) + 30 + (9 * j), insets.top + (Dimensions.cardLib_h * i) + 18 + (2 * i), Dimensions.cardLib_w, Dimensions.cardLib_h);</b>
&nbsp;
<b class="nc">&nbsp;                library1Label.add(tempPanel,gbc);</b>
<b class="nc">&nbsp;                otherLibrariesCards.get(0)[i][j] = tempLabel;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        insets = library2Label.getInsets();</b>
&nbsp;        // fill library
<b class="nc">&nbsp;        for(int i = 0; i &lt; ROWS; i++){</b>
<b class="nc">&nbsp;            for(int j = 0; j &lt; COLS; j++){</b>
<b class="nc">&nbsp;                tempLabel = new JLabel();</b>
<b class="nc">&nbsp;                tempPanel = new JPanel();</b>
&nbsp;
<b class="nc">&nbsp;                tempLabel.setPreferredSize(new Dimension(Dimensions.cardLib_w, Dimensions.cardLib_h));</b>
<b class="nc">&nbsp;                tempLabel.setVisible(false);</b>
&nbsp;
<b class="nc">&nbsp;                tempPanel.add(tempLabel);</b>
<b class="nc">&nbsp;                tempPanel.setPreferredSize(new Dimension(Dimensions.cardLib_w, Dimensions.cardLib_h));</b>
<b class="nc">&nbsp;                tempPanel.setBackground(new java.awt.Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;                tempPanel.setOpaque(false);</b>
&nbsp;
<b class="nc">&nbsp;                tempPanel.setBounds(insets.left + (Dimensions.cardLib_w * j) + 30 + (9 * j), insets.top + (Dimensions.cardLib_h * i) + 18 + (2 * i), Dimensions.cardLib_w, Dimensions.cardLib_h);</b>
&nbsp;
<b class="nc">&nbsp;                library2Label.add(tempPanel,gbc);</b>
<b class="nc">&nbsp;                otherLibrariesCards.get(1)[i][j] = tempLabel;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        insets = library3Label.getInsets();</b>
&nbsp;        // fill library
<b class="nc">&nbsp;        for(int i = 0; i &lt; ROWS; i++){</b>
<b class="nc">&nbsp;            for(int j = 0; j &lt; COLS; j++){</b>
<b class="nc">&nbsp;                tempLabel = new JLabel();</b>
<b class="nc">&nbsp;                tempPanel = new JPanel();</b>
&nbsp;
<b class="nc">&nbsp;                tempLabel.setPreferredSize(new Dimension(Dimensions.cardLib_w, Dimensions.cardLib_h));</b>
<b class="nc">&nbsp;                tempLabel.setVisible(false);</b>
&nbsp;
<b class="nc">&nbsp;                tempPanel.add(tempLabel);</b>
<b class="nc">&nbsp;                tempPanel.setPreferredSize(new Dimension(Dimensions.cardLib_w, Dimensions.cardLib_h));</b>
<b class="nc">&nbsp;                tempPanel.setBackground(new java.awt.Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;                tempPanel.setOpaque(false);</b>
&nbsp;
<b class="nc">&nbsp;                tempPanel.setBounds(insets.left + (Dimensions.cardLib_w * j) + 30 + (9 * j), insets.top + (Dimensions.cardLib_h * i) + 18 + (2 * i), Dimensions.cardLib_w, Dimensions.cardLib_h);</b>
&nbsp;
<b class="nc">&nbsp;                library3Label.add(tempPanel,gbc);</b>
<b class="nc">&nbsp;                otherLibrariesCards.get(2)[i][j] = tempLabel;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        //player 1
&nbsp;
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.2;</b>
<b class="nc">&nbsp;        player1Panel.add(library1Text,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.8;</b>
<b class="nc">&nbsp;        player1Panel.add(library1Label,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 100;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.1;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.0;</b>
<b class="nc">&nbsp;        internalPanelLow.add(player1Panel,gbc);</b>
&nbsp;        //player 2
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.2;</b>
<b class="nc">&nbsp;        player2Panel.add(library2Text,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.8;</b>
<b class="nc">&nbsp;        player2Panel.add(library2Label,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 1;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 100;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.1;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.0;</b>
<b class="nc">&nbsp;        internalPanelLow.add(player2Panel,gbc);</b>
&nbsp;        //player 3
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.2;</b>
<b class="nc">&nbsp;        player3Panel.add(library3Text,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.8;</b>
<b class="nc">&nbsp;        player3Panel.add(library3Label,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 2;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 100;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.1;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.0;</b>
<b class="nc">&nbsp;        internalPanelLow.add(player3Panel,gbc);</b>
&nbsp;
<b class="nc">&nbsp;        eventText = new JTextField(120);</b>
<b class="nc">&nbsp;        updateEventText(&quot; Last relevant event of the Game &quot;);</b>
<b class="nc">&nbsp;        eventText.setMinimumSize(new Dimension(Dimensions.textCols * 45, Dimensions.textCols + 8));</b>
<b class="nc">&nbsp;        eventText.setEditable(false);</b>
<b class="nc">&nbsp;        eventText.setBorder(null);</b>
&nbsp;
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.2;</b>
<b class="nc">&nbsp;        gbc.gridwidth = 3;</b>
&nbsp;        //gbc.fill = HORIZONTAL;
<b class="nc">&nbsp;        gbc.insets = new Insets(0,15,10,0);</b>
<b class="nc">&nbsp;        internalPanelLow.add(eventText, gbc);</b>
&nbsp;
&nbsp;        //blue
<b class="nc">&nbsp;        internalPanelHigh = new JPanel(new GridBagLayout());</b>
<b class="nc">&nbsp;        gameBoardPanel = new JPanel(new GridBagLayout()); //the chairman is just a card in the matrix</b>
&nbsp;        //Text on top of the board
<b class="nc">&nbsp;        boardText = new JTextArea(&quot; Board of the Game &quot;);</b>
<b class="nc">&nbsp;        boardText.setEditable(false);</b>
<b class="nc">&nbsp;        boardLabel = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;boards/livingroom.png&quot;)).getImage().getScaledInstance(Dimensions.boardDim, Dimensions.boardDim, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        boardLabel.setPreferredSize(new Dimension(Dimensions.boardDim, Dimensions.boardDim));</b>
<b class="nc">&nbsp;        boardLabel.setLayout(new GridBagLayout());</b>
&nbsp;        // fill the board
<b class="nc">&nbsp;        for(int i = 0; i &lt; DIM; i++){</b>
<b class="nc">&nbsp;            for(int j = 0; j &lt; DIM; j++){</b>
<b class="nc">&nbsp;                tempLabel = new JLabel();</b>
<b class="nc">&nbsp;                tempPanel = new JPanel();</b>
&nbsp;
<b class="nc">&nbsp;                tempLabel.setPreferredSize(new Dimension(Dimensions.cardDimBoard, Dimensions.cardDimBoard));</b>
<b class="nc">&nbsp;                tempLabel.setVisible(false);</b>
&nbsp;
<b class="nc">&nbsp;                gbc.insets = new Insets(0,0,0,0);</b>
&nbsp;
<b class="nc">&nbsp;                gbc.gridx = j;</b>
<b class="nc">&nbsp;                gbc.gridy = i;</b>
<b class="nc">&nbsp;                gbc.ipadx = 2;</b>
<b class="nc">&nbsp;                gbc.ipady = 2;</b>
<b class="nc">&nbsp;                gbc.weightx = 0.0;</b>
<b class="nc">&nbsp;                gbc.weighty = 0.0;</b>
<b class="nc">&nbsp;                gbc.gridwidth = 1;</b>
<b class="nc">&nbsp;                gbc.gridheight = 1;</b>
&nbsp;
<b class="nc">&nbsp;                if(i == libFullX &amp;&amp; j == libFullY) {</b>
<b class="nc">&nbsp;                    tempPanel.setLayout(null);</b>
<b class="nc">&nbsp;                    gbc.gridwidth = 2;</b>
<b class="nc">&nbsp;                    gbc.gridheight = 2;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                tempPanel.add(tempLabel);</b>
<b class="nc">&nbsp;                tempPanel.setPreferredSize(new Dimension(Dimensions.cardDimBoard, Dimensions.cardDimBoard));</b>
<b class="nc">&nbsp;                tempPanel.setBackground(new java.awt.Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;                tempPanel.setOpaque(false);</b>
<b class="nc">&nbsp;                boardLabel.add(tempPanel,gbc);</b>
&nbsp;
<b class="nc">&nbsp;                if(i == libFullX &amp;&amp; j == libFullY){</b>
<b class="nc">&nbsp;                    insets = tempPanel.getInsets();</b>
<b class="nc">&nbsp;                    tempLabel.setBounds(insets.left + 4, insets.top, Dimensions.cardDimBoard, Dimensions.cardDimBoard);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                boardCards[i][j] = tempLabel;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        for(int i = 0; i &lt; DIM; i++){</b>
<b class="nc">&nbsp;            for(int j = 0; j &lt; DIM; j++){</b>
<b class="nc">&nbsp;                int finalI = i;</b>
<b class="nc">&nbsp;                int finalJ = j;</b>
<b class="nc">&nbsp;                boardCards[i][j].addMouseListener(new MouseAdapter() {</b>
&nbsp;                    @Override
&nbsp;                    public void mouseClicked(MouseEvent e) {
<b class="nc">&nbsp;                        if(board.getGameBoard()[finalI][finalJ].color == it.polimi.ingsw.model.Color.EMPTY || !name.equals(activeName) || board.isBoardUnplayable())</b>
&nbsp;                            return;
<b class="nc">&nbsp;                        int index = getCardIndex(finalI, finalJ);</b>
<b class="nc">&nbsp;                        if(index == -1){</b>
<b class="nc">&nbsp;                            if(cardsPicked.size() == 6)</b>
&nbsp;                                return;
<b class="nc">&nbsp;                            boardCards[finalI][finalJ].setBorder(BorderFactory.createLineBorder(borderColor, cardBorderSize));</b>
<b class="nc">&nbsp;                            cardsPicked.add(finalI);</b>
<b class="nc">&nbsp;                            cardsPicked.add(finalJ);</b>
&nbsp;                        }
&nbsp;                        else{
<b class="nc">&nbsp;                            boardCards[finalI][finalJ].setBorder(BorderFactory.createLineBorder(borderColor, 0));</b>
<b class="nc">&nbsp;                            cardsPicked.remove(index);</b>
<b class="nc">&nbsp;                            cardsPicked.remove(index);</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;                });
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        boardCards[libFullX][libFullY].setIcon(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;scoring tokens/end game.jpg&quot;)).getImage().getScaledInstance(Dimensions.cardDimBoard, Dimensions.cardDimBoard, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        gbc.insets = new Insets(Dimensions.generalBorder, Dimensions.generalBorder, Dimensions.generalBorder, Dimensions.generalBorder);</b>
<b class="nc">&nbsp;        myLibraryPanel = new JPanel(new GridBagLayout());</b>
&nbsp;        //Text on top of my library
<b class="nc">&nbsp;        myLibraryText = new JTextArea(&quot; Your personal Library (&quot; + name + &quot;) &quot;);</b>
<b class="nc">&nbsp;        myLibraryText.setEditable(false);</b>
&nbsp;
<b class="nc">&nbsp;        chooseColPanel = new JPanel(new FlowLayout());</b>
<b class="nc">&nbsp;        r1 = new JRadioButton(&quot;col 1&quot;);</b>
<b class="nc">&nbsp;        r2 = new JRadioButton(&quot;col 2&quot;);</b>
<b class="nc">&nbsp;        r3 = new JRadioButton(&quot;col 3&quot;);</b>
<b class="nc">&nbsp;        r4 = new JRadioButton(&quot;col 4&quot;);</b>
<b class="nc">&nbsp;        r5 = new JRadioButton(&quot;col 5&quot;);</b>
<b class="nc">&nbsp;        r1.setSelected(true);</b>
&nbsp;
<b class="nc">&nbsp;        btnGroup = new ButtonGroup();</b>
&nbsp;
<b class="nc">&nbsp;        btnGroup.add(r1);</b>
<b class="nc">&nbsp;        btnGroup.add(r2);</b>
<b class="nc">&nbsp;        btnGroup.add(r3);</b>
<b class="nc">&nbsp;        btnGroup.add(r4);</b>
<b class="nc">&nbsp;        btnGroup.add(r5);</b>
&nbsp;
<b class="nc">&nbsp;        chooseColPanel.add(r1);</b>
<b class="nc">&nbsp;        chooseColPanel.add(r2);</b>
<b class="nc">&nbsp;        chooseColPanel.add(r3);</b>
<b class="nc">&nbsp;        chooseColPanel.add(r4);</b>
<b class="nc">&nbsp;        chooseColPanel.add(r5);</b>
&nbsp;
<b class="nc">&nbsp;        pickCardsBtn = new JButton(&quot;Pick Cards&quot;);</b>
<b class="nc">&nbsp;        pickCardsBtn.setFocusPainted(false);</b>
<b class="nc">&nbsp;        pickCardsBtn.setPreferredSize(new Dimension(Dimensions.btnW, Dimensions.btnH));</b>
<b class="nc">&nbsp;        pickCardsBtn.addActionListener(e -&gt; new Thread(this::tryToPickCards).start());</b>
<b class="nc">&nbsp;        libraryLabel = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;boards/bookshelf_orth.png&quot;)).getImage().getScaledInstance(Dimensions.lib_w, Dimensions.lib_h, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        libraryLabel.setPreferredSize(new Dimension(Dimensions.lib_w, Dimensions.lib_h));</b>
<b class="nc">&nbsp;        libraryLabel.setLayout(null);</b>
<b class="nc">&nbsp;        insets = libraryLabel.getInsets();</b>
&nbsp;        // fill library
<b class="nc">&nbsp;        for(int i = 0; i &lt; ROWS; i++){</b>
<b class="nc">&nbsp;            for(int j = 0; j &lt; COLS; j++){</b>
<b class="nc">&nbsp;                tempLabel = new JLabel();</b>
<b class="nc">&nbsp;                tempPanel = new JPanel();</b>
&nbsp;
<b class="nc">&nbsp;                tempLabel.setPreferredSize(new Dimension(Dimensions.cardLib_w, Dimensions.cardLib_h));</b>
<b class="nc">&nbsp;                tempLabel.setVisible(false);</b>
&nbsp;
<b class="nc">&nbsp;                tempPanel.add(tempLabel);</b>
<b class="nc">&nbsp;                tempPanel.setPreferredSize(new Dimension(Dimensions.cardLib_w, Dimensions.cardLib_h));</b>
<b class="nc">&nbsp;                tempPanel.setBackground(new java.awt.Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;                tempPanel.setOpaque(false);</b>
&nbsp;
<b class="nc">&nbsp;                tempPanel.setBounds(insets.left + (Dimensions.cardLib_w * j) + 30 + (9 * j), insets.top + (Dimensions.cardLib_h * i) + 18 + (2 * i), Dimensions.cardLib_w, Dimensions.cardLib_h);</b>
&nbsp;
<b class="nc">&nbsp;                libraryLabel.add(tempPanel,gbc);</b>
<b class="nc">&nbsp;                myLibraryCards[i][j] = tempLabel;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        gbc.insets = new Insets(Dimensions.generalBorder, Dimensions.generalBorder, Dimensions.generalBorder, Dimensions.generalBorder);</b>
<b class="nc">&nbsp;        chatPanel = new JPanel(new GridBagLayout());</b>
<b class="nc">&nbsp;        chatTitle = new JTextArea(&quot; Chat history of the Game &quot;);</b>
<b class="nc">&nbsp;        chatTitle.setEditable(false);</b>
<b class="nc">&nbsp;        tempChatHistory = new JTextArea(Dimensions.textCols, Dimensions.textCols - 8);</b>
<b class="nc">&nbsp;        tempChatHistory.setMinimumSize(new Dimension(Dimensions.textCols * (Dimensions.textCharsNum), Dimensions.textCols * (Dimensions.textCharsNum)));</b>
<b class="nc">&nbsp;        tempChatHistory.setEditable(false);</b>
<b class="nc">&nbsp;        tempChatHistory.setText(fullChat);</b>
<b class="nc">&nbsp;        chatHistory = new JScrollPane(tempChatHistory);</b>
<b class="nc">&nbsp;        chatHistory.setMinimumSize(new Dimension(Dimensions.textCols * (Dimensions.textCharsNum), Dimensions.textCols * (Dimensions.textCharsNum)));</b>
<b class="nc">&nbsp;        insertMessage = new JTextField(Dimensions.textCols);</b>
<b class="nc">&nbsp;        insertMessage.setMinimumSize(new Dimension(Dimensions.textCols * Dimensions.textCharsNum, Dimensions.textCols));</b>
<b class="nc">&nbsp;        insertMessage.setText(&quot;Insert message: &quot;);</b>
<b class="nc">&nbsp;        insertMessage.setBorder(null);</b>
<b class="nc">&nbsp;        insertMessage.addActionListener(event -&gt; sendMessageBtn.doClick());</b>
<b class="nc">&nbsp;        insertPlayer = new JTextField(Dimensions.textCols);</b>
<b class="nc">&nbsp;        insertPlayer.setBorder(null);</b>
<b class="nc">&nbsp;        insertPlayer.setText(&quot;Insert player (all for everyone) : &quot;);</b>
<b class="nc">&nbsp;        insertPlayer.setMinimumSize(new Dimension(Dimensions.textCols * Dimensions.textCharsNum, Dimensions.textCols));</b>
<b class="nc">&nbsp;        sendMessageBtn = new JButton(&quot;Send Message&quot;);</b>
<b class="nc">&nbsp;        sendMessageBtn.setFocusPainted(false);</b>
<b class="nc">&nbsp;        sendMessageBtn.setPreferredSize(new Dimension());</b>
<b class="nc">&nbsp;        sendMessageBtn.setPreferredSize(new Dimension(Dimensions.btnW, Dimensions.btnH));</b>
<b class="nc">&nbsp;        sendMessageBtn.addActionListener(e -&gt; new Thread(this::sendChatMsg).start());</b>
&nbsp;        //BOARD
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.1;</b>
<b class="nc">&nbsp;        gameBoardPanel.add(boardText,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.9;</b>
<b class="nc">&nbsp;        gameBoardPanel.add(boardLabel,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.5;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.0;</b>
<b class="nc">&nbsp;        internalPanelHigh.add(gameBoardPanel,gbc);</b>
&nbsp;        //LIBRARY
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.1;</b>
<b class="nc">&nbsp;        myLibraryPanel.add(myLibraryText,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.6;</b>
<b class="nc">&nbsp;        myLibraryPanel.add(libraryLabel,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 2;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.6;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.15;</b>
<b class="nc">&nbsp;        myLibraryPanel.add(chooseColPanel,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 3;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.15;</b>
<b class="nc">&nbsp;        myLibraryPanel.add(pickCardsBtn,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 1;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.25;</b>
<b class="nc">&nbsp;        internalPanelHigh.add(myLibraryPanel,gbc);</b>
&nbsp;        //CHAT
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.0;</b>
<b class="nc">&nbsp;        chatPanel.add(chatTitle,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.5;</b>
<b class="nc">&nbsp;        chatPanel.add(chatHistory,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 2;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.1;</b>
<b class="nc">&nbsp;        chatPanel.add(insertPlayer,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 3;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 1.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.1;</b>
<b class="nc">&nbsp;        chatPanel.add(insertMessage,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 4;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.2;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.0;</b>
<b class="nc">&nbsp;        chatPanel.add(sendMessageBtn,gbc);</b>
<b class="nc">&nbsp;        gbc.gridx = 2;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.0;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.25;</b>
<b class="nc">&nbsp;        internalPanelHigh.add(chatPanel,gbc);</b>
&nbsp;
&nbsp;        //FIRST LEVEL - RED
&nbsp;
<b class="nc">&nbsp;        generalLabel = new JLabel(new ImageIcon(new ImageIcon(classLoader.getResource(&quot;misc/sfondo parquet.jpg&quot;)).getImage().getScaledInstance(screenSize.width * 5 / 6, screenSize.height * 9 / 10, Image.SCALE_SMOOTH)));</b>
<b class="nc">&nbsp;        generalLabel.setPreferredSize(new Dimension(screenSize.width * 5 / 6, screenSize.height * 8 / 10 + 65));</b>
<b class="nc">&nbsp;        generalLabel.setLayout(new GridBagLayout());</b>
&nbsp;
<b class="nc">&nbsp;        internalPanelHigh.setBackground(new Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        internalPanelSide.setBackground(new Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        internalPanelLow.setBackground(new Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        CO1Panel.setBackground(new Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        CO2Panel.setBackground(new Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        POPanel.setBackground(new Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        chairmanPanel.setBackground(new Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        player1Panel.setBackground(new Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        player2Panel.setBackground(new Color(0, 0, 0, 0));</b>
<b class="nc">&nbsp;        player3Panel.setBackground(new Color(0, 0, 0, 0));</b>
&nbsp;
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.8;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.5;</b>
<b class="nc">&nbsp;        generalLabel.add(internalPanelHigh,gbc);</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;        gbc.gridx = 0;</b>
<b class="nc">&nbsp;        gbc.gridy = 1;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.8;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.3;</b>
<b class="nc">&nbsp;        generalLabel.add(internalPanelLow,gbc);</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;        gbc.gridx = 1;</b>
<b class="nc">&nbsp;        gbc.gridy = 0;</b>
<b class="nc">&nbsp;        gbc.ipadx = 0;</b>
<b class="nc">&nbsp;        gbc.ipady = 0;</b>
<b class="nc">&nbsp;        gbc.weightx = 0.2;</b>
<b class="nc">&nbsp;        gbc.weighty = 0.8;</b>
<b class="nc">&nbsp;        gbc.gridheight = 2;</b>
<b class="nc">&nbsp;        generalLabel.add(internalPanelSide,gbc);</b>
&nbsp;
<b class="nc">&nbsp;        mainPanel.removeAll();//remove all the precedent GUI used to choose the name</b>
&nbsp;        //Now add the new GUI to play the game
<b class="nc">&nbsp;        gbc2.gridx=0;</b>
<b class="nc">&nbsp;        gbc2.gridy=0;</b>
<b class="nc">&nbsp;        mainPanel.add(generalLabel,gbc2);</b>
&nbsp;
<b class="nc">&nbsp;        mainFrame.setVisible(true);</b>
<b class="nc">&nbsp;        mainFrame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);</b>
<b class="nc">&nbsp;        mainFrame.addWindowListener(new java.awt.event.WindowAdapter() {</b>
&nbsp;            @Override
&nbsp;            public void windowClosing(java.awt.event.WindowEvent windowEvent) {
<b class="nc">&nbsp;                if (JOptionPane.showConfirmDialog(mainFrame, &quot;Are you sure to close the game ? (progress will be saved)&quot;, &quot;Close Window&quot;, JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE) == JOptionPane.YES_OPTION)</b>
<b class="nc">&nbsp;                    System.exit(0);</b>
&nbsp;            }
&nbsp;        });
<b class="nc">&nbsp;        Game.waitForSeconds(Game.fastTimer);</b>
<b class="nc">&nbsp;        new Thread(this::updateGUI).start();</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-05-24 15:18</div>
</div>
</body>
</html>
